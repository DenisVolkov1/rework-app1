<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<title>Архив</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!-- My *.css -->
    <link rel="stylesheet" type="text/css" href="/resources/css/myCSS.css" th:href="@{/resources/css/myCSS.css}"/>
    <link rel="stylesheet" type="text/css" href="/resources/css/myCSS.css" th:href="@{/resources/css/gradient.css}"/>
     <!-- My *.css -->
    <link rel="stylesheet" type="text/css" href="/resources/bootstrap4/css/bootstrap.min.css" th:href="@{/resources/bootstrap4/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" href="/resources/bootstrap-select-1.13.14/dist/css/bootstrap-select.min.css" th:href="@{/resources/bootstrap-select-1.13.14/dist/css/bootstrap-select.min.css}"/>
    <!-- for FF, Chrome, Opera -->
	<link rel="icon" type="image/png" th:href="@{/resources/icons_favicon/favicon-16x16.png}" sizes="16x16">
	<link rel="icon" type="image/png" th:href="@{/resources/icons_favicon/favicon-32x32.png}" sizes="32x32">
	<!-- for IE -->
	<link rel="icon" type="image/x-icon" th:href="@{/resources/icons_favicon/favicon-16x16.ico}" >
	<link rel="shortcut icon" type="image/x-icon" th:href="@{/resources/icons_favicon/favicon-32x32.ico}"/>
</head>
<body>
  	<input hidden id ="server" th:value= "${server}">
	<input hidden id ="port" th:value= "${port}">
	
	<!-- BUTTON UP TO TOP -->
	<button id="topPageButton" title="Go to top">Вверх</button>
	<!-- LOADING -->
	<div id="loading" style="position: absolute; top: 50%; left: 50%; margin-top: -1.5rem; margin-left: -1.5rem; width: 5rem; height: 5rem;">
		<div class="spinner-border text-primary" role="status" style="width: 5.6rem; height: 5.6rem;">
    		<span class="sr-only">Loading...</span>
  		</div>
  		<div class="text-primary font-weight-bolder" style="position: absolute; top: 40%; left: 8%;">ЗАГРУЗКА</div>
	</div>
  	<!-- LOADING -->
	<div class="container-fluid pb-3 d-none">	
		<div class="container-fluid gradientbackground">		
			<div class="row">
				<div class= "col-12 mb-3 gradientbackgroundHeaderArchive"><h1 class="gradient-text-2" style="opacity:0.7">АРХИВ</h1></div>
			</div>
			<div class="row px-4"> 
				<div>
					<a id="eraserSearch" class="text-decoration-none">
						<img class="icon_hover" th:src="@{/resources/icons_svg/eraser-fill.svg}" alt="Bootstrap" width="18" height="18">
					</a>
				</div>
				<div class="col-3 px-2">
					<form id="formSearchFilter" th:method="POST" th:action="@{/archive}" th:object="${modelFilter}">						  
						<div class="input-group mb-3">
							<input id ="searchInput" th:field= "*{search}" type="text" class="form-control" placeholder="Поиск по ключевому слову" aria-label="Recipient's username" aria-describedby="basic-addon2">
							<div class="input-group-append">
							  <input id ="formSearchButton" class="btn btn-primary" type="submit" value="Найти">
							</div>
						</div>							  
					</form> 
				</div>		
				
				<div class="col-auto ml-auto">
					<div>
						<form th:method="GET" th:action="@{'/'+${project}}">
							<button id ="backMain" class="btn btn-primary align-items-right text-white rounded" type="submit">
								Назад
							</button>
						</form>
					</div>				
				</div>				
			</div>	  
		</div>
		
		
		<table id ="reworkTable" class="container-xl ml-0 reworkTable myShadow table-hover table-bordered tableFixHead">
		    <thead id="headerMainTable">
		        <tr class="reworkTable">
		         	<th style="width: 48px;"> </th>
		        	<th style="width: 560px;"> Название доработки/исправления
		        		<div id="buttonWRAP" iswrraped="false" title="button" style="width: 23px;">
			             	<img id="arrow-bar-left" class="d-none icon_hover" th:src="@{/resources/icons_svg/arrow-bar-left.svg}" alt="Bootstrap" width="20" height="20" >
			             	<img id="arrow-bar-right" class="icon_hover" th:src="@{/resources/icons_svg/arrow-bar-right.svg}" alt="Bootstrap" width="20" height="20">
			             </div>  
		        	</th>
		        	<th style="width: 100px; text-align: center;"> Проект </th>
		            <th style="width: 125px; text-align: center;"> </th> <!-- field1 -->
		            <th style="width: 125px; text-align: center;"> </th> <!-- field2 -->
		            <th style="width: 130px; text-align: center;"> Дата создания </th>
		            <th style="width: 130px; text-align: center;"> Дата изменения </th>
		        </tr>
		     </thead>
		     
		     <tbody>
		       	<th:block th:each="rowArchive : *{listArchivesDto}">
		       	<tr class="heightrow" permanentHidden= "false">
				   <td class="p-1" style="vertical-align: middle; text-align: center; color: rgb(149, 149, 149)" th:text="*{rowArchive.getReworkNumber()}"></td>
		       	   <td style="vertical-align: middle;">
		                <div>
							<form class="text-truncate" th:method="GET" th:action="@{/showrework_archive/{reworknumber}(reworknumber = 'reworknumber_'+${rowArchive.getReworkNumber()})}" th:object="${modelFilter}">
								<input hidden th:field= "*{search}" type="text">
								<a class="pl-3 aLinkArchive" submitLinkShowReworkForm th:text="${rowArchive.getDescription()}"></a>
							</form>
						</div>
		       	   </td>
		       	   <td class="p-1" style="vertical-align: middle; text-align: center; font-size: 95%;">
		           	 	<div th:text="*{rowArchive.getProject()}"></div>
		           </td>
		       	   <td class="text-truncate" style="vertical-align: middle; text-align: center;">
			       	   <th:block th:each="s : *{rowArchive.getRedmainTasks()}">
			       	   		<a class="aLinkArchive" th:href="${s.getTaskUrl()}" th:text="${s.getTask()}+''+(${sStat.last} ? '' : ',')"></a>
			       	   </th:block>
			       </td>
		       	   <td class="text-truncate" style="vertical-align: middle; text-align: center;">
			       	   <th:block th:each="s : *{rowArchive.getAnotherTasks()}">
			       	   		<a class="aLinkArchive" th:href="${s.getTaskUrl()}" th:text="${s.getTask()}+''+(${sStat.last} ? '' : ',')"></a>
			       	   </th:block>
			       </td>
			       <td class="p-1" style="vertical-align: middle; text-align: center; font-size: 95%;">
		           	 	<div th:text="*{rowArchive.getAddDateD()}"></div>
		           </td>
		           <td class="p-1" style="vertical-align: middle; text-align: center; font-size: 95%;">
		           	 	<div th:text="*{rowArchive.getEditDateD()}"></div>
		           </td>
		        </tr>
		    	</th:block>
		    </tbody>
		</table>
<!-- 		<div class="mt-3 col-sm-12 col-md-7"> -->
<!-- 			<div class="dataTables_paginate paging_simple_numbers" id="panel_paginate"> -->
<!-- 				<ul class="pagination"> -->
<!-- 					<li class="paginate_button page-item "> -->
<!-- 						<a href="" aria-controls="example" data-dt-idx="0" tabindex="0" class="page-link">1</a> -->
<!-- 					</li> -->
<!-- 					<li class="paginate_button page-item "> -->
<!-- 						<a href="" aria-controls="example" data-dt-idx="1" tabindex="0" class="page-link">2</a> -->
<!-- 					</li> -->
<!-- 					<li class="paginate_button page-item "> -->
<!-- 						<a href="" aria-controls="example" data-dt-idx="2" tabindex="0" class="page-link">3</a> -->
<!-- 					</li> -->
<!-- 					<li class="paginate_button page-item "> -->
<!-- 						<a href="" aria-controls="example" data-dt-idx="3" tabindex="0" class="page-link">4</a> -->
<!-- 					</li> -->
<!-- 				</ul> -->
<!-- 			</div> -->
<!-- 		</div> -->
	</div>
</body>
<script type="text/javascript" th:src="@{/resources/bootstrap4/js/jquery-3.5.1.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/bootstrap4/js/bootstrap.bundle.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/bootstrap-select-1.13.14/dist/js/bootstrap-select.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/bootstrap-select-1.13.14/dist/js/i18n/defaults-ru_RU.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/js/util/main_util.js}"></script>
<script type="text/javascript" th:src="@{/resources/js/archive.js}"></script>
</html>
