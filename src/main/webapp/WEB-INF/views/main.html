<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<title>–î–æ—Ä–∞–±–æ—Ç–∫–∏</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- My *.css -->
    <link rel="stylesheet" type="text/css" href="/resources/css/myCSS.css" th:href="@{/resources/css/myCSS.css}"/>
    <link rel="stylesheet" type="text/css" href="/resources/css/myCSS.css" th:href="@{/resources/css/gradient.css}"/>
     <!-- My *.css -->
    <link rel="stylesheet" type="text/css" href="/resources/bootstrap4/css/bootstrap.min.css" th:href="@{/resources/bootstrap4/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" href="/resources/bootstrap-select-1.13.14/dist/css/bootstrap-select.min.css" th:href="@{/resources/bootstrap-select-1.13.14/dist/css/bootstrap-select.min.css}"/>
    <link rel="stylesheet" type="text/css" href="/resources/gijgo-combined-1.9.14/css/gijgo.css" th:href="@{/resources/gijgo-combined-1.9.14/css/gijgo.css}"/>
    <!-- for FF, Chrome, Opera -->
	<link rel="icon" type="image/png" th:href="@{/resources/icons_favicon/favicon-16x16.png}" sizes="16x16">
	<link rel="icon" type="image/png" th:href="@{/resources/icons_favicon/favicon-32x32.png}" sizes="32x32">
	<!-- for IE -->
	<link rel="icon" type="image/x-icon" th:href="@{/resources/icons_favicon/favicon-16x16.ico}" >
	<link rel="shortcut icon" type="image/x-icon" th:href="@{/resources/icons_favicon/favicon-32x32.ico}"/>
</head>
<body>
  	<input hidden id ="server" th:value= "${server}">
	<input hidden id ="port" th:value= "${port}">
	<input hidden id ="gradientforheader" th:value= "${gradientforheader}">
	<input hidden id ="project" th:value= "${project}">
	
	<!-- MODAL STATUS UPDATE --><!-- MODAL STATUS UPDATE --><!-- MODAL STATUS UPDATE --><!-- MODAL STATUS UPDATE -->
	<div class="modal fade" id="updateStatusModal" tabindex="-1" data-backdrop="static" data-keyboard="false" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="updateStatusModalLabel">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</h5>
	      </div>
	      <div class="modal-body">
			<div class="container mt-3">
			  <div id="reworkNumberUpdateStatusLabel" class="d-none"></div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ </div>
			    </div>
			    <div id="nameUpdateStatusLabel" class="col-7"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –ó–∞–¥–∞—á–∞ </div>
			    </div>
			    <div id="taskUpdateStatusLabel" class="col-7"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –°–µ—Ä–≤–µ—Ä </div>
			    </div>
				<div id="serverUpdateStatusLabel" class="col-7"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å </div>
			    </div>
				<div id="statusUpdateStatusLabel" class="col-7 h4"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –ö—Ç–æ –æ–±–Ω–æ–≤–∏–ª </div>
			    </div>
			    <div class="col-3">
			     	<select id="whoUpdatesSelect" class="custom-select" data-style="btn-default">
	    			  <option th:each="v, i : ${allWhoUpdates}" th:value="${v.addWho}" th:utext="${v.addWho}"/>
	    			</select>
			    </div>
			  </div>
			</div>
	      </div>
	      <div class="modal-footer">
	        <button id = "cancelUpdateStatusModal" type="button" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
	        <button id = "updateStatusButton" type="button" class="btn btn-warning ml-2">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
	      </div>
	    </div>
	  </div>
	</div>
	<!-- MODAL STATUS UPDATE --><!-- MODAL STATUS UPDATE --><!-- MODAL STATUS UPDATE --><!-- MODAL STATUS UPDATE -->
	<!----------------------------------------------------------------------------------------------------->
	<!-- MODAL DATE UPDATE --><!-- MODAL DATE UPDATE --><!-- MODAL DATE UPDATE --><!-- MODAL DATE UPDATE -->
	<div class="modal fade" id="updateDateModal" tabindex="-1" data-backdrop="static" data-keyboard="false" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É</h5>
	      </div>
	      <div class="modal-body">
			<div class="container mt-3">
			  <div id="reworkNumberUpdateDateLabel" class="d-none"></div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ </div>
			    </div>
			    <div id="nameUpdateDateLabel" class="col-7"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –ó–∞–¥–∞—á–∞ </div>
			    </div>
			    <div id="taskUpdateDateLabel" class="col-7"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –°–µ—Ä–≤–µ—Ä </div>
			    </div>
				<div id="serverUpdateDateLabel" class="col-7"></div>
			  </div>
			  <div class="row mt-2 align-items-center">
			    <div class="col-3">
			      <div class="card-header p-1"> –£—Å—Ç. –¥–∞—Ç—É </div>
			    </div>
				<div class="col-7">
					<input id="datepicker" width="276" />
				</div>
			  </div>
			</div>
	      </div>
	      <div class="modal-footer">
	        <button id = "cancelUpdateDateModal" type="button" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
	        <button id = "updateDateButton" type="button" class="btn btn-warning ml-2">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É</button>
	      </div>
	    </div>
	  </div>
	</div>
	<!-- MODAL DATE UPDATE --><!-- MODAL DATE UPDATE --><!-- MODAL DATE UPDATE --><!-- MODAL DATE UPDATE -->
	
	<!-- BUTTON UP TO TOP -->
	<button id="topPageButton" title="Go to top">–í–≤–µ—Ä—Ö</button>
	<!-- LOADING -->
	<div id="loading" style="position: absolute; top: 50%; left: 50%; margin-top: -1.5rem; margin-left: -1.5rem; width: 5rem; height: 5rem;">
		<div class="spinner-border text-primary" role="status" style="width: 5.6rem; height: 5.6rem;">
    		<span class="sr-only">Loading...</span>
  		</div>
  		<div class="text-primary font-weight-bolder" style="position: absolute; top: 40%; left: 8%;">–ó–ê–ì–†–£–ó–ö–ê</div>
	</div>
  	<!-- LOADING -->
	<div class="container-fluid pb-3 d-none">	
		<div class="container-fluid gradientbackground">		
			<div class="row">
				<div id="gradientHeader" class= "col-12 mb-3 gradientbackgroundHeaderMain">
					<h1 class="gradient-text-1" style="opacity:0.7" th:text="${header}">header</h1>
				</div>
			</div>
			<div class="row px-4"> 
				<div>
					<a id="eraserSearch" class="text-decoration-none">
						<img class="icon_hover" th:src="@{/resources/icons_svg/eraser-fill.svg}" alt="Bootstrap" width="18" height="18">
					</a>
				</div>
				<div class="col-3 px-2">
					<form id="formSearchFilter" th:method="POST" th:action="@{'/'+${project}}" th:object="${modelFilter}">						  
						<div class="input-group mb-3">
							<input id ="searchInput" th:field= "*{search}" type="text" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É" aria-label="Recipient's username" aria-describedby="basic-addon2">
							<div class="input-group-append">
							  <input id ="formSearchButton" class="btn btn-primary" type="submit" value="–ù–∞–π—Ç–∏">
							</div>
						</div>							  
					</form> 
				</div>		
				<div class="col-auto px-1">
					<div>
						<form th:method="GET" th:action="@{'/'+${project}+'/newrework'}" th:object="${modelFilter}">
							<input hidden th:field= "*{search}" type="text">
							<button id ="newReworkButton" class="btn btn-primary align-items-center text-white rounded" type="submit">
								<img class="pb-1" th:src="@{/resources/icons_svg/plus-circle-fill.svg}" alt="Bootstrap" width="20" height="20">
								<div class="col-auto" data-container="body" data-toggle="tooltip" data-placement="right" data-html="true" title="<b>–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∫—É</b></div>"></div>
								<!-- –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∫—É -->
							</button>
						</form>
					</div>				
				</div>
				<div id="ProjDropdown" class="dropdown">
				  <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				    –ü—Ä–æ–µ–∫—Ç—ã
				  </button>
				  <div id="projects" class="dropdown-menu" aria-labelledby="dropdownMenu2">
				  	<th:block th:each="s, si : ${projects}" >
			        	<a class="dropdown-item" th:href="@{'/'+${s.getPartUrl()}}" th:text="${s.getName()}" ></a>
	 		        </th:block>
				  </div>
				</div>
				<div>
					<div class="col-auto px-1 legend" data-container="body" data-toggle="tooltip" data-placement="right" data-html="true" title="<b>üß™</b><em> - –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.</em><br><b>‚úî</b><em> - –¥–æ—Ä–∞–±–æ—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</em></div>"><small>–ª–µ–≥–µ–Ω–¥–∞</small></div>			
				</div>				
				<div class="col-auto ml-auto">
					<div>
						<form th:method="GET" th:action="@{/archive(project=${project})}">
						<input hidden type="project" th:value="${project}" th:name="project" th:placeholder="project" />
							<button id ="inArchive" class="btn btn-secondary align-items-right text-white rounded" type="submit">
								–í –ê—Ä—Ö–∏–≤
								<img th:src="@{/resources/icons_svg/archive-fill.svg}" alt="Bootstrap" width="16" height="16">
							</button>
						</form>
					</div>				
				</div>				
			</div>	  
		</div>
		
		<table id ="reworkTable" class="container-xl ml-0 reworkTable myShadow table-hover table-bordered tableFixHead">
		    <thead id="headerMainTable">
		        <tr class="reworkTable">
		         	<th style="width: 48px;"> </th>
		        	<th style="width: 560px;"> –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
		        		<div id="buttonWRAP" iswrraped="false" title="button" style="width: 23px;">
			             	<img id="arrow-bar-left" class="d-none icon_hover" th:src="@{/resources/icons_svg/arrow-bar-left.svg}" alt="Bootstrap" width="20" height="20" >
			             	<img id="arrow-bar-right" class="icon_hover" th:src="@{/resources/icons_svg/arrow-bar-right.svg}" alt="Bootstrap" width="20" height="20">
			             </div>  
		        	</th>	        	
		            <th style="width: 125px; text-align: center;" th:text="${field1}"> field1 </th>
		            <th style="width: 125px; text-align: center;" th:text="${field2}"> field2 </th>	            	        	            
		            <th:block th:each="s, si : ${serversNameForTitle}" >
			        	<th colspan="2" th:text="${s.getServer()}" style="width: 125px; text-align: center;"  data-toggle="tooltip" data-placement="top"  class="p-1"></th>
	 		        </th:block>	        
		        </tr>
		        <tr class="reworkTable">
		         	<th style="width: 38px;"></th>
		        	<th style="width: 460px;"></th>
		            <th style="width: 80px; text-align: center;"></th>
		            <th style="width: 100px; text-align: center;"></th>	            	        	            
		            <th:block th:each="s, si : ${serversNameForTitle}">
			        	<th style="width: 50px; text-align: center;"  data-toggle="tooltip" data-placement="top"  class="p-1">–°—Ç–∞—Ç.</th>
			        	<th style="width: 50px; text-align: center;"  data-toggle="tooltip" data-placement="top"  class="p-1">–î–∞—Ç–∞</th>
	 		        </th:block>	        
		        </tr>
		     </thead>
		     
		     <tbody>
		       	<th:block th:each="rowRework : *{mainListReworksDto}">
		       	<tr class="heightrow" permanentHidden= "false">
				   <td class="p-1" style="vertical-align: middle; text-align: center; color: rgb(149, 149, 149)" th:text="*{rowRework.v1.getReworkNumber()}">
				   </td>
		       	   <td style="vertical-align: middle;">
		                <div>
							<form class="text-truncate" th:method="GET" th:action="@{'/'+${project}+'/showrework/reworknumber_'+${rowRework.v1.getReworkNumber()}}" th:object="${modelFilter}">
								<input hidden th:field= "*{search}" type="text">
								<a class="pl-3 aLinkMain" submitLinkShowReworkForm th:text="${rowRework.v1.getDescription()}"></a>
							</form>
						</div>
		       	   </td>
		       	   <td class="text-truncate tdRedmainTask" style="vertical-align: middle; text-align: center;">
			       	   <th:block th:each="s : *{rowRework.v1.getRedmainTasks()}">
			       	   		<a class="aLinkRedmainTask" th:href="${s.getTaskUrl()}" th:text="${s.getTask()}+''+(${sStat.last} ? '' : ',')"></a>
			       	   </th:block>
			       </td>
		       	   <td class="text-truncate" style="vertical-align: middle; text-align: center;">
			       	   <th:block th:each="s : *{rowRework.v1.getAnotherTasks()}">
			       	   		<a class="aLinkMonetkaTask" th:href="${s.getTaskUrl()}" th:text="${s.getTask()}+''+(${sStat.last} ? '' : ',')"></a>
			       	   </th:block>
			       </td>
		           <th:block th:each="rowReworkDetailDto : *{rowRework.v2}">
		           	<td class="p-0 cell" style="vertical-align: middle;" data-toggle="tooltip" data-html="true" title="">
		           		 <div class="statusDIV p-0" th:text="*{rowReworkDetailDto.getStatus()}"></div>
		       			 <select th:unless="${rowReworkDetailDto.isAllReworksInstalled()}" class="p-0 selectpicker" data-dropup-auto="false" data-style="btn-default" data-width="65px">
		       			 	<option th:each="s, si : ${allStatuses}" th:value="${s.status}" th:utext="${s.status}"/>
		       			 </select>
		           	 </td>
		           	 <td date="updateDate" class="p-1" style="vertical-align: middle; text-align: center; font-size: 95%; cursor: pointer;">
		           	 	<div th:text="*{rowReworkDetailDto.getEditDate()}"></div>
		           	 </td>
		           </th:block>
		        </tr>
		    	</th:block>
		    </tbody>
		</table>
	</div>
</body>
<script type="text/javascript" th:src="@{/resources/bootstrap4/js/jquery-3.5.1.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/bootstrap4/js/bootstrap.bundle.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/bootstrap-select-1.13.14/dist/js/bootstrap-select.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/bootstrap-select-1.13.14/dist/js/i18n/defaults-ru_RU.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/gijgo-combined-1.9.14/js/gijgo.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/gijgo-combined-1.9.14/js/messages/messages.ru-ru.js}" ></script>
<!-- My *.js -->
<script type="text/javascript" th:src="@{/resources/js/util/main_util.js}"></script>
<script type="text/javascript" th:src="@{/resources/js/main.js}"></script>
</html>
